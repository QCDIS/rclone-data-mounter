import React, { useState } from 'react';
import { Button } from '@material-ui/core';

interface DataSenderProps {
    name: string;
    accessKeyId: string;
    secretKey: string;
    endpointS3API: string;
    selectedRegionIndex: number;
    selectedLocationIndex: number;
    selectedEnvVarIndex: number;
    selectedEncryptionIndex: number;
    selectedACLIndex: number;
    selectedKMSIndex: number;
    selectedStorageClassIndex: number;
    selectedNewRemoteOptionIndex: number;
}

const DataSender: React.FC<DataSenderProps> = ({
    name,
    accessKeyId,
    secretKey,
    endpointS3API,
    selectedRegionIndex,
    selectedLocationIndex,
    selectedEnvVarIndex,
    selectedEncryptionIndex,
    selectedACLIndex,
    selectedKMSIndex,
    selectedStorageClassIndex,
    selectedNewRemoteOptionIndex
}) => {
    const sendData = async () => {
        try {
            console.log('Name: ', NameNewRemoteField);
            console.log('Options: ', NewRemoteOptions);
            console.log('Access Key ID: ', AccesKeyIdField);
            console.log('Endpoint S3 API: ', EndpointS3APIField);
            console.log('Regions: ', regions);
            console.log('Location: ', location);
            console.log('Environment Var: ', environmentVar);
            console.log('Encryption: ', encription);
            console.log('ACL: ', acl);
            console.log('KMS: ', kms);
            console.log('Storage Class: ', storage_class);
            console.log('Secret Key: ', SecretKeyField);

            const resp = await requestAPI<any>('createRemote', {
                body: JSON.stringify({
                    name: NameNewRemoteField,
                    options: NewRemoteOptions,
                    access_key_id: AccesKeyIdField,
                    endpoint_s3_api: EndpointS3APIField,
                    regions: regions,
                    location: location,
                    environment_var: environmentVar,
                    encryption: encription,
                    acl: acl,
                    kms: kms,
                    storage_class: storage_class,
                    secret_key: SecretKeyField
                }),
                method: 'POST'
            });

            console.log('Response: ', resp);
            setOpen(true);
        } catch (error) {
            console.error(error);
        }
    };

    return (
        <>
            <Button onClick={sendData}>Save</Button>
        </>
    );
};

export default DataSender;
